# 의류 검수 비교 시스템 - 프론트엔드 설계

## 개요

Gemini API와 구축모델(RT-DETR + Qwen2-VL)의 검수 결과를 비교하고,
현장 전문가가 판단을 기록하는 웹 애플리케이션.

---

## 사용자 시나리오

### 1. 전문가 리뷰 플로우

```
1. 리뷰 목록 페이지 접속
   ↓
2. 리뷰 대기 건 선택
   ↓
3. 상세 페이지에서 두 모델 결과 비교
   - 이미지 확인 (원본 vs 검수)
   - Gemini 결과 확인
   - 구축모델 결과 확인 (RT-DETR bbox 포함)
   ↓
4. 판단 선택 및 저장
   - gemini_correct / custom_correct / both_correct / both_wrong
   - 코멘트 (선택)
   ↓
5. 다음 건으로 이동 또는 목록으로 복귀
```

### 2. 통계 확인 플로우

```
1. 대시보드 접속
   ↓
2. 전체 통계 확인
   - 등급 일치율
   - 전문가 판단 분포
   - 리뷰어별 통계
```

---

## 화면 구성

### 1. 리뷰 목록 (`/reviews`)

```
┌──────────────────────────────────────────────────────────────────────┐
│  의류 검수 비교 시스템                    [대시보드]  [로그아웃]      │
├──────────────────────────────────────────────────────────────────────┤
│                                                                      │
│  리뷰 현황:  전체 156건  |  대기 23건  |  완료 133건                 │
│                                                                      │
│  [전체] [대기중] [완료]  [등급불일치만 ☐]     검색: [________] [🔍]  │
│                                                                      │
│  ┌────────────────────────────────────────────────────────────────┐  │
│  │ #  │ 상품명              │ Gemini │ 구축 │ 일치 │ 상태   │ 날짜│  │
│  ├────────────────────────────────────────────────────────────────┤  │
│  │ 1  │ 나이키 에어맥스 90   │   B    │  A   │  ✗   │ 대기   │1/22│  │
│  │ 2  │ 아디다스 후드티      │   A    │  A   │  ✓   │ 대기   │1/22│  │
│  │ 3  │ 유니클로 청바지      │   S    │  B   │  ✗   │ 완료   │1/21│  │
│  │ ...                                                            │  │
│  └────────────────────────────────────────────────────────────────┘  │
│                                                                      │
│  [< 이전]  1 2 3 4 5  [다음 >]                                       │
│                                                                      │
└──────────────────────────────────────────────────────────────────────┘
```

**기능:**
- 필터링: 전체/대기/완료, 등급불일치만
- 정렬: 날짜순, 등급순
- 페이지네이션
- 행 클릭 시 상세 페이지로 이동

---

### 2. 리뷰 상세 (`/reviews/[taskId]`)

```
┌──────────────────────────────────────────────────────────────────────────────┐
│  ← 목록으로                          리뷰 #67890          [이전] [다음]      │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─ 상품 정보 ─────────────────────────────────────────────────────────────┐ │
│  │ 상품명: 나이키 에어맥스 90                                               │ │
│  │ 원가: 150,000원  │  카테고리: fashion_clothing                          │ │
│  │ 클레임: DEFECT  │  반품 사유: 밑창 손상                                  │ │
│  └──────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  ┌─ 이미지 비교 ────────────────────────────────────────────────────────────┐ │
│  │                                                                          │ │
│  │    원본 이미지                         검수 이미지                       │ │
│  │  ┌─────────────────┐               ┌─────────────────┐                  │ │
│  │  │                 │               │    ┌───┐        │                  │ │
│  │  │                 │               │    │ X │ bbox   │                  │ │
│  │  │   [이미지]      │               │    └───┘        │                  │ │
│  │  │                 │               │                 │                  │ │
│  │  └─────────────────┘               └─────────────────┘                  │ │
│  │                                                                          │ │
│  │  [원본1] [원본2]                    [front] [back] [side]                │ │
│  │                                     ☑ bbox 표시                          │ │
│  └──────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  ┌─ 결과 비교 ──────────────────────────────────────────────────────────────┐ │
│  │                                                                          │ │
│  │  ┌─ Gemini ────────────────┐    ┌─ 구축모델 ────────────────┐           │ │
│  │  │                         │    │                           │           │ │
│  │  │  등급: [B]              │    │  등급: [A]                │           │ │
│  │  │  가격: 105,000원        │    │  가격: 120,000원          │           │ │
│  │  │  시간: 3.2초            │    │  시간: 5.8초              │           │ │
│  │  │                         │    │  (DETR: 1.2초 + Qwen: 4.6초)          │ │
│  │  │  ─────────────────────  │    │  ─────────────────────    │           │ │
│  │  │  사유:                  │    │  사유:                    │           │ │
│  │  │  밑창 경미 손상         │    │  디자인 요소로 판단       │           │ │
│  │  │                         │    │                           │           │ │
│  │  │  상세:                  │    │  상세:                    │           │ │
│  │  │  • 원단상태: 양호       │    │  • 원단상태: 양호         │           │ │
│  │  │  • 밑창: 일부 마모      │    │  • 착용흔적: 없음         │           │ │
│  │  │                         │    │                           │           │ │
│  │  └─────────────────────────┘    │  ─────────────────────    │           │ │
│  │                                  │  RT-DETR 탐지:            │           │ │
│  │                                  │  • damage 72% (back)      │           │ │
│  │                                  │                           │           │ │
│  │                                  │  원본 비교:               │           │ │
│  │                                  │  • 동일상품: ✓            │           │ │
│  │                                  │  • 원본결함: ✗            │           │ │
│  │                                  │  • 디자인: ✗              │           │ │
│  │                                  └───────────────────────────┘           │ │
│  └──────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  ┌─ 전문가 판단 ────────────────────────────────────────────────────────────┐ │
│  │                                                                          │ │
│  │  ○ Gemini가 맞음    ○ 구축모델이 맞음    ○ 둘 다 맞음    ○ 둘 다 틀림   │ │
│  │                                                                          │ │
│  │  코멘트 (선택):                                                          │ │
│  │  ┌────────────────────────────────────────────────────────────────────┐  │ │
│  │  │                                                                    │  │ │
│  │  └────────────────────────────────────────────────────────────────────┘  │ │
│  │                                                                          │ │
│  │  리뷰어: [김철수 ▼]                              [저장] [건너뛰기]       │ │
│  │                                                                          │ │
│  └──────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
```

**기능:**
- 이미지 탭 전환 (원본/검수 각각)
- RT-DETR bbox 오버레이 토글
- 두 모델 결과 side-by-side 비교
- 판단 저장 및 다음 건 이동
- 키보드 단축키: 1,2,3,4로 판단 선택, Enter로 저장

---

### 3. 대시보드 (`/dashboard`)

```
┌──────────────────────────────────────────────────────────────────────────────┐
│  의류 검수 비교 시스템                    [리뷰목록]  [로그아웃]             │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─ 전체 현황 ───────────────────────────────────────────────────────────┐  │
│  │                                                                        │  │
│  │   전체          리뷰 완료        대기중          등급 일치율           │  │
│  │  ┌────┐        ┌────┐          ┌────┐          ┌────┐                 │  │
│  │  │156 │        │133 │          │ 23 │          │72% │                 │  │
│  │  │건  │        │건  │          │건  │          │    │                 │  │
│  │  └────┘        └────┘          └────┘          └────┘                 │  │
│  │                                                                        │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  ┌─ 전문가 판단 분포 ────────────────┐  ┌─ 등급 분포 비교 ────────────────┐ │
│  │                                   │  │                                  │ │
│  │  Gemini 정확  ████████░░ 45%     │  │  Gemini    구축모델              │ │
│  │  구축모델 정확 ██████░░░░ 32%     │  │  S: 12%    S: 8%                │ │
│  │  둘 다 정확   ███░░░░░░░ 15%     │  │  A: 45%    A: 52%               │ │
│  │  둘 다 오류   ██░░░░░░░░  8%     │  │  B: 35%    B: 28%               │ │
│  │                                   │  │  F:  8%    F: 12%               │ │
│  └───────────────────────────────────┘  └──────────────────────────────────┘ │
│                                                                              │
│  ┌─ 리뷰어별 통계 ───────────────────────────────────────────────────────┐  │
│  │                                                                        │  │
│  │  리뷰어     │ 리뷰수 │ Gemini정확 │ 구축정확 │ 둘다정확 │ 둘다오류   │  │
│  │  ──────────────────────────────────────────────────────────────────── │  │
│  │  김철수     │   45   │    20     │    15    │    8     │    2       │  │
│  │  이영희     │   38   │    18     │    12    │    6     │    2       │  │
│  │  박민수     │   50   │    22     │    18    │    7     │    3       │  │
│  │                                                                        │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
```

**기능:**
- 실시간 통계 갱신
- 차트 시각화 (막대/파이 차트)
- 기간 필터 (오늘/이번주/전체)
- CSV 내보내기

---

## 기술 스택

| 영역 | 기술 |
|------|------|
| 프레임워크 | Next.js 16 (App Router) |
| 언어 | TypeScript |
| 스타일링 | Tailwind CSS |
| 상태관리 | React Query (TanStack Query) |
| 차트 | Recharts 또는 Chart.js |
| UI 컴포넌트 | shadcn/ui |
| 이미지 처리 | Canvas API (bbox 오버레이) |
| 배포 | Vercel |

---

## API 연동

### Base URL
```
개발: http://localhost:8000
운영: https://api.inspection.example.com
```

### Endpoints

| 기능 | Method | Endpoint |
|------|--------|----------|
| 목록 조회 | GET | `/api/reviews` |
| 상세 조회 | GET | `/api/reviews/{taskId}` |
| 판단 저장 | POST | `/api/reviews/{taskId}` |
| 통계 조회 | GET | `/api/reviews/stats` |

---

## 폴더 구조

```
src/
├── app/
│   ├── layout.tsx
│   ├── page.tsx              # 리다이렉트 → /reviews
│   ├── reviews/
│   │   ├── page.tsx          # 목록
│   │   └── [taskId]/
│   │       └── page.tsx      # 상세
│   └── dashboard/
│       └── page.tsx          # 대시보드
├── components/
│   ├── ui/                   # shadcn/ui 컴포넌트
│   ├── layout/
│   │   ├── Header.tsx
│   │   └── Sidebar.tsx
│   ├── reviews/
│   │   ├── ReviewList.tsx
│   │   ├── ReviewCard.tsx
│   │   ├── ReviewDetail.tsx
│   │   ├── ImageCompare.tsx
│   │   ├── ResultCompare.tsx
│   │   └── VerdictForm.tsx
│   └── dashboard/
│       ├── StatsCards.tsx
│       ├── VerdictChart.tsx
│       └── ReviewerTable.tsx
├── lib/
│   ├── api.ts                # API 클라이언트
│   └── utils.ts
├── hooks/
│   ├── useReviews.ts
│   └── useStats.ts
└── types/
    └── index.ts              # 타입 정의
```

---

## 개발 우선순위

### Phase 1: 핵심 기능
1. [ ] 프로젝트 세팅 (shadcn/ui, React Query)
2. [ ] API 클라이언트 구현
3. [ ] 리뷰 목록 페이지
4. [ ] 리뷰 상세 페이지 (기본)
5. [ ] 판단 저장 기능

### Phase 2: 이미지 기능
6. [ ] 이미지 뷰어 (탭 전환)
7. [ ] RT-DETR bbox 오버레이
8. [ ] 이미지 확대/축소

### Phase 3: 대시보드
9. [ ] 통계 카드
10. [ ] 차트 시각화
11. [ ] 리뷰어별 통계

### Phase 4: 개선
12. [ ] 키보드 단축키
13. [ ] 다크모드
14. [ ] 반응형 디자인
15. [ ] 성능 최적화

---

## 환경 변수

```env
# .env.local
NEXT_PUBLIC_API_URL=http://localhost:8000
```
